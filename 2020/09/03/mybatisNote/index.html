<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Mybatis 简易笔记 | DIDIQi</title><meta name="description" content="JDBC 操作缺陷 开发者需要关注Connecttion、Statement、ResultSet对象创建和销毁； 对返回结果ResultSet,需要 自己封装为List；  Mybatis功能特点 mybatis是 MyBatis SQL Mapper Framework for Java （sql映射框架）  1）sql mapper :sql"><meta name="keywords" content="笔记,Spring"><meta name="author" content="Blue Dam"><meta name="copyright" content="Blue Dam"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://wx2.sbimg.cn/2020/07/02/2ZpV8.png"><link rel="canonical" href="https://wwww.cyberboy.online/2020/09/03/mybatisNote/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//ta.qq.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta property="og:type" content="article"><meta property="og:title" content="Mybatis 简易笔记"><meta property="og:url" content="https://wwww.cyberboy.online/2020/09/03/mybatisNote/"><meta property="og:site_name" content="DIDIQi"><meta property="og:description" content="JDBC 操作缺陷 开发者需要关注Connecttion、Statement、ResultSet对象创建和销毁； 对返回结果ResultSet,需要 自己封装为List；  Mybatis功能特点 mybatis是 MyBatis SQL Mapper Framework for Java （sql映射框架）  1）sql mapper :sql"><meta property="og:image" content="https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/Mybatis/mybatis.png"><meta property="article:published_time" content="2020-09-02T16:36:44.000Z"><meta property="article:modified_time" content="2020-09-03T15:44:25.000Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="prev" title="转发与重定向" href="https://wwww.cyberboy.online/2020/09/04/reSend/"><link rel="next" title="Spring框架之动态代理&amp;AOP" href="https://wwww.cyberboy.online/2020/08/17/SpringOfAOP/"><script src="https://tajs.qq.com/stats?sId=500723512" charset="UTF-8"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: Blue Dam","link":"链接: ","source":"来源: DIDIQi","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-center"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://wx2.sbimg.cn/2020/07/02/2Z4no.md.png" onerror="onerror=null;src='https://wx2.sbimg.cn/2020/07/02/2ZGcV.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">19</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">18</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">6</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/Lab/"><i class="fa-fw fa fa-cogs"></i><span> Lab</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-clipboard-list"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-hourglass-half"></i><span> 归档</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-list"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/photoes/"><i class="fa-fw fas fa-photo-video"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-pen"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JDBC-操作缺陷"><span class="toc-number">1.</span> <span class="toc-text">JDBC 操作缺陷</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mybatis"><span class="toc-number">2.</span> <span class="toc-text">Mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#功能特点"><span class="toc-number">2.1.</span> <span class="toc-text">功能特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mybatis框架提供了什么"><span class="toc-number">2.2.</span> <span class="toc-text">mybatis框架提供了什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#我们要做什么"><span class="toc-number">2.3.</span> <span class="toc-text">我们要做什么</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#使用步骤"><span class="toc-number">3.</span> <span class="toc-text">使用步骤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mybatis-的配置文件"><span class="toc-number">4.</span> <span class="toc-text">Mybatis 的配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#直接加载-xml文件作为数据库驱动"><span class="toc-number">4.1.</span> <span class="toc-text">直接加载.xml文件作为数据库驱动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xml配置文件从properties加载数据库驱动"><span class="toc-number">4.2.</span> <span class="toc-text">.xml配置文件从properties加载数据库驱动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#增添日志"><span class="toc-number">4.2.1.</span> <span class="toc-text">增添日志</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#详解"><span class="toc-number">5.</span> <span class="toc-text">详解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#约束文件"><span class="toc-number">5.1.</span> <span class="toc-text">约束文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#标签"><span class="toc-number">6.</span> <span class="toc-text">标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mapper"><span class="toc-number">6.0.1.</span> <span class="toc-text">mapper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#insert"><span class="toc-number">6.0.2.</span> <span class="toc-text">insert</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#update"><span class="toc-number">6.0.3.</span> <span class="toc-text">update</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#delete"><span class="toc-number">6.0.4.</span> <span class="toc-text">delete</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#select"><span class="toc-number">6.0.5.</span> <span class="toc-text">select</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#普通查询"><span class="toc-number">6.0.5.1.</span> <span class="toc-text">普通查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#模糊查询"><span class="toc-number">6.0.5.2.</span> <span class="toc-text">模糊查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#聚合（获取总记录数）"><span class="toc-number">6.0.5.3.</span> <span class="toc-text">聚合（获取总记录数）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注意："><span class="toc-number">6.0.6.</span> <span class="toc-text">注意：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#说明"><span class="toc-number">6.0.7.</span> <span class="toc-text">说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#公共属性"><span class="toc-number">6.0.8.</span> <span class="toc-text">公共属性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#动态代理"><span class="toc-number">7.</span> <span class="toc-text">动态代理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#传参"><span class="toc-number">8.</span> <span class="toc-text">传参</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#parameterType-amp-resultType"><span class="toc-number">8.1.</span> <span class="toc-text">parameterType &amp;resultType</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#amp"><span class="toc-number">8.2.</span> <span class="toc-text"># &amp; $</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#"><span class="toc-number">8.2.1.</span> <span class="toc-text">#</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-1"><span class="toc-number">8.2.2.</span> <span class="toc-text">$</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#替换列名"><span class="toc-number">8.2.2.1.</span> <span class="toc-text">替换列名</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#单个简单数据类型【常用】"><span class="toc-number">8.3.</span> <span class="toc-text">单个简单数据类型【常用】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多个参数"><span class="toc-number">8.4.</span> <span class="toc-text">多个参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-Param命名参数【常用】"><span class="toc-number">8.4.1.</span> <span class="toc-text">使用@Param命名参数【常用】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用Java对象【常用】"><span class="toc-number">8.4.2.</span> <span class="toc-text">使用Java对象【常用】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#按参数位置"><span class="toc-number">8.4.3.</span> <span class="toc-text">按参数位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用Map"><span class="toc-number">8.4.4.</span> <span class="toc-text">使用Map</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#返回值"><span class="toc-number">9.</span> <span class="toc-text">返回值</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#处理过程"><span class="toc-number">9.1.</span> <span class="toc-text">处理过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis"><span class="toc-number">9.1.1.</span> <span class="toc-text">mybatis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JDBC"><span class="toc-number">9.1.2.</span> <span class="toc-text">JDBC</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#返回值列名≠对象属性名"><span class="toc-number">9.2.</span> <span class="toc-text">返回值列名≠对象属性名</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#resultMap"><span class="toc-number">9.2.1.</span> <span class="toc-text">resultMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#起别名"><span class="toc-number">9.2.2.</span> <span class="toc-text">起别名</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#模糊查询like"><span class="toc-number">10.</span> <span class="toc-text">模糊查询like</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#通配符"><span class="toc-number">10.1.</span> <span class="toc-text">通配符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#java代码中指定like内容"><span class="toc-number">10.2.</span> <span class="toc-text">java代码中指定like内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mapper文件中拼接"><span class="toc-number">10.3.</span> <span class="toc-text">mapper文件中拼接</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#动态sql"><span class="toc-number">11.</span> <span class="toc-text">动态sql</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#if标签"><span class="toc-number">11.1.</span> <span class="toc-text">if标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#语法"><span class="toc-number">11.1.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#例"><span class="toc-number">11.1.2.</span> <span class="toc-text">例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#where标签"><span class="toc-number">11.2.</span> <span class="toc-text">where标签</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#foreach标签"><span class="toc-number">11.3.</span> <span class="toc-text">foreach标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#语法-1"><span class="toc-number">11.3.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#例-1"><span class="toc-number">11.3.2.</span> <span class="toc-text">例</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/waller/yjmvwx.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">DIDIQi</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/Lab/"><i class="fa-fw fa fa-cogs"></i><span> Lab</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-clipboard-list"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-hourglass-half"></i><span> 归档</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-list"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/photoes/"><i class="fa-fw fas fa-photo-video"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-pen"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Mybatis 简易笔记</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-09-03 00:36:44"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-09-03</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-09-03 23:44:25"><i class="fas fa-history fa-fw"></i> 更新于 2020-09-03</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">4k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 17 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="far fa-comments fa-fw post-meta__icon"></i><span>评论数:</span><a href="/2020/09/03/mybatisNote/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/09/03/mybatisNote/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><div class="note primary no-icon">
            
          </div>

<h1 id="JDBC-操作缺陷"><a href="#JDBC-操作缺陷" class="headerlink" title="JDBC 操作缺陷"></a>JDBC 操作缺陷</h1><ol>
<li>开发者需要关注Connecttion、Statement、ResultSet对象创建和销毁；</li>
<li>对返回结果ResultSet,需要 自己封装为List；</li>
</ol>
<h1 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h1><h2 id="功能特点"><a href="#功能特点" class="headerlink" title="功能特点"></a>功能特点</h2><ul>
<li><p>mybatis是 MyBatis SQL Mapper Framework for Java （sql映射框架）</p>
</li>
<li><p>1）sql mapper :sql映射</p>
<pre><code>可以把数据库表中的一行数据  映射为 一个java对象。一行数据可以看做是一个java对象。操作这个对象，就相当于操作表中的数据。</code></pre><p>   2） Data Access Objects（DAOs） : 数据访问 ， 对数据库执行增删改查。</p>
</li>
</ul>
<h2 id="mybatis框架提供了什么"><a href="#mybatis框架提供了什么" class="headerlink" title="mybatis框架提供了什么"></a>mybatis框架提供了什么</h2><ul>
<li><p>提供了创建\关闭 Connection ,Statement, ResultSet的能力，无需开发者多次操作。</p>
</li>
<li><p>提供执行sql语句的能力，无需开发人员手动执行。</p>
</li>
<li><p>提供了循环sql， 把sql的结果转为java对象， List集合的能力</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDBC需自己把结果封装为List	  </span></span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">		Student stu = <span class="keyword">new</span> Student();</span><br><span class="line">		stu.setId(rs.getInt(<span class="string">"id"</span>));</span><br><span class="line">		stu.setName(rs.getString(<span class="string">"name"</span>));</span><br><span class="line">		stu.setAge(rs.getInt(<span class="string">"age"</span>));</span><br><span class="line">		<span class="comment">//从数据库取出数据转为 Student 对象，封装到 List 集合</span></span><br><span class="line">		stuList.add(stu);</span><br><span class="line">	  &#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="我们要做什么"><a href="#我们要做什么" class="headerlink" title="我们要做什么"></a>我们要做什么</h2><ol>
<li>提供SQL语句；</li>
<li>拿到mybatis返回的数据，进行业务逻辑操作。</li>
</ol>
<h1 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h1><ol>
<li><p>加入依赖 ：a、mybatis框架依赖；b、数据库连接依赖。</p>
</li>
<li><p>创建Dao接口：定义操作数据库方法；</p>
</li>
<li><p>创建mapper 文件，即sql映射文件：写sql 语句，要与Dao接口中方法对应。</p>
</li>
<li><p>创建配置文件</p>
</li>
<li><p>使用mybatis的SqlSession对象，执行sql语句。</p>
<p>注意：如果以后与mybatis插件或者和spring配合使用，就不必这么麻烦，但是这几项文件都必不可少。</p>
</li>
</ol>
<h1 id="Mybatis-的配置文件"><a href="#Mybatis-的配置文件" class="headerlink" title="Mybatis 的配置文件"></a>Mybatis 的配置文件</h1><h2 id="直接加载-xml文件作为数据库驱动"><a href="#直接加载-xml文件作为数据库驱动" class="headerlink" title="直接加载.xml文件作为数据库驱动"></a>直接加载.xml文件作为数据库驱动</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/db1"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="xml配置文件从properties加载数据库驱动"><a href="#xml配置文件从properties加载数据库驱动" class="headerlink" title=".xml配置文件从properties加载数据库驱动"></a>.xml配置文件从properties加载数据库驱动</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入properties 文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"db.properties"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 配置信息，通过 '$&#123;&#125;' 语法从.properties 文件中加载 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--environments，配置数据库环境信息,可通过envirment配置多个环境--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--default，通过此属性切换运行环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"dev"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"dev"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--使用JDBC作为管理Connection对象的事务处理，如：commit,rollback。--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--数据源类型，POOLED，表示使用连接池--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--  数据库连接信息 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--配置多个环境--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"pro"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--使用JDBC作为管理Connection对象的事务处理，如：commit,rollback。--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--数据源类型，POOLED，表示使用连接池--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--  数据库连接信息 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--mapper 标签指定sql映射文件的位置（从类路径开始）--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!---这个映射文件文职，相当于告诉接口，持久层实现类在什么位置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"org/didiqi/Dao/Student.xml"</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="增添日志"><a href="#增添日志" class="headerlink" title="增添日志"></a>增添日志</h3><ul>
<li>方便调试</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在控制台打印日志信息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"STDOUT_LOGGING"</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h1><h2 id="约束文件"><a href="#约束文件" class="headerlink" title="约束文件"></a>约束文件</h2><ul>
<li>限制，检查当前文件中出现的标签、属性是否符合mybatis要求</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h1><ul>
<li>所有的标签都必须写ID，可以随意定义。但要求写Dao接口中的<strong>方法名称</strong>。</li>
</ul>
<h3 id="mapper"><a href="#mapper" class="headerlink" title="mapper"></a>mapper</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.dbsy.student.mapper.AdminMapper"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--mapper:当前文件根标签，必须存在。--&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>namespace</td>
<td>唯一值，命名空间。通过namespace 区分不同的mapper映射文件。要求使用Dao接口的全限定名称。</td>
</tr>
</tbody></table>
<h3 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h3><ul>
<li>插入</li>
</ul>
<p>&lt;insert&gt;在标签中写insert开头的sql语句 处理添加操作    </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"saveUser"</span> <span class="attr">parameterType</span>=<span class="string">"org.didiqi.domain.User"</span>&gt;</span></span><br><span class="line">    insert into user(username, address, sex, birthday) values (#&#123;username&#125;, #&#123;address&#125;, #&#123;sex&#125;, #&#123;birthday&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="update"><a href="#update" class="headerlink" title="update"></a>update</h3><p>&lt;update&gt;在标签中写update开头的sql语句 处理修改操作   </p>
<ul>
<li>更新</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateUser"</span> <span class="attr">parameterType</span>=<span class="string">"org.didiqi.domain.User"</span>&gt;</span></span><br><span class="line">    update user set username = #&#123;username&#125;, address = #&#123;address&#125;, sex = #&#123;sex&#125;, birthday = #&#123;birthday&#125; where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h3><ul>
<li>删除</li>
</ul>
<p>&lt;delete&gt;在标签中写delete开头的sql语句 处理删除操作</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteUser"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">    delete from user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><ul>
<li>查询</li>
</ul>
<p>&lt;select&gt;在标签中写select开头的sql语句 处理查询操作</p>
<h4 id="普通查询"><a href="#普通查询" class="headerlink" title="普通查询"></a>普通查询</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultType</span>=<span class="string">"org.didiqi.domain.User"</span>&gt;</span></span><br><span class="line">    select * from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultType</span>=<span class="string">"org.didiqi.domain.User"</span>&gt;</span></span><br><span class="line">    select * from user where id like #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="聚合（获取总记录数）"><a href="#聚合（获取总记录数）" class="headerlink" title="聚合（获取总记录数）"></a>聚合（获取总记录数）</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findTotal"</span> <span class="attr">resultType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">    select count(*) from user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h3><ul>
<li>select 标签中 parameterType属性可以忽略。</li>
<li>select 标签中 resultType属性必须写。</li>
<li>insert\update\delete 三个标签只写ID属性，其他可以一律省略。</li>
</ul>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><ol>
<li><p>JDBC中向PrepareStatement对占位符的位置设置参数时，非常繁琐。   </p>
<p>解决：MyBatis自动将java队形映射至sql语句中，通过statement中的parameterType定义输入参数的类型。</p>
</li>
<li><p>JDBC中解析结果集时需要把字段的值设置到相应的实体类属性名中。    </p>
</li>
</ol>
<p>解决：MyBatis自动将sql执行结果映射到java对象，通过statement中的resultType定义输出结果的类型。</p>
<h3 id="公共属性"><a href="#公共属性" class="headerlink" title="公共属性"></a>公共属性</h3><table>
<thead>
<tr>
<th>属性名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>parameterType</td>
<td>为sql语句传递的参数的类型</td>
</tr>
<tr>
<td>resultType</td>
<td>表示结果类型。要求使用类的全限定名称。说明：sql语句执行后，由mybatis 自动将ResultSet的每条记录，转变成java对象。JDBC需要手动遍历将ResultSet的每条记录中每个值，设置给每个属性。</td>
</tr>
</tbody></table>
<p>例：</p>
<ul>
<li>JDBC</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//JDBC需自己把结果封装为List	  </span></span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">		Student stu = <span class="keyword">new</span> Student();</span><br><span class="line">		stu.setId(rs.getInt(<span class="string">"id"</span>));</span><br><span class="line">		stu.setName(rs.getString(<span class="string">"name"</span>));</span><br><span class="line">		stu.setAge(rs.getInt(<span class="string">"age"</span>));</span><br><span class="line">		<span class="comment">//从数据库取出数据转为 Student 对象，封装到 List 集合</span></span><br><span class="line">		stuList.add(stu);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>mybatis</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>= <span class="string">"studentDao"</span> <span class="attr">resultType</span>=<span class="string">"org.didiqi.domain.Student"</span>&gt;</span></span><br><span class="line">    select id,name,age from student  order by id</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h1><ul>
<li>使用sqlSession..getMapper(dao.class) 获取对象接口</li>
<li>使用getMapper，JDK动态代理方法，可以通过类接口，的全限定名与mapper文件（mapper文件中的命名空间）做映射。</li>
</ul>
<h1 id="传参"><a href="#传参" class="headerlink" title="传参"></a>传参</h1><ul>
<li>从java 代码中将数据传入到mapper文件的sql语句中。</li>
</ul>
<h2 id="parameterType-amp-resultType"><a href="#parameterType-amp-resultType" class="headerlink" title="parameterType &amp;resultType"></a>parameterType &amp;resultType</h2><ul>
<li>mapper文件中的属性，表示dao接口中方法的传入参数的数据类型和方法返回值类型。</li>
</ul>
<p>例：UserDao接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> UserDao <span class="title">selectUserById</span><span class="params">(Integer id)</span></span></span><br><span class="line"><span class="function"><span class="comment">//此时接口中的参数id 为Interger类型。所以需要在mapper文件中对应语句的parameterType属性说明。</span></span></span><br><span class="line"><span class="function"><span class="comment">//返回值类型为 UserDao 所以要设置resultType</span></span></span><br><span class="line"><span class="function"><span class="comment">//select标签中做的 id 对应Dao 接口中的方法名</span></span></span><br><span class="line"><span class="function">&lt;select id</span>=<span class="string">"selectUserById"</span> parameterType=<span class="string">"全限名，如java.lang.Integer"</span> resultType=<span class="string">"全限定名"</span> &gt;</span><br><span class="line">    select id, name,age from student where id=#&#123;id&#125;</span><br><span class="line">&lt;select&gt;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// #&#123;任意字符&#125;就是一个占位符，当拿到传入数据后，根据数据类型将其放入对应位置。</span></span><br></pre></td></tr></table></figure>



<h2 id="amp"><a href="#amp" class="headerlink" title="# &amp; $"></a># &amp; $</h2><h3 id=""><a href="#" class="headerlink" title="#"></a>#</h3><ul>
<li>#占位符。告诉mybatis，需要使用真实参数代替。<ul>
<li>这里使用PrepareStatement 对象，替换sql语句中的 ‘ ？’</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mapper:</span></span><br><span class="line">&lt;select id=<span class="string">"selectUserById"</span> parameterType=<span class="string">"全限名"</span> resultType=<span class="string">"全限定名"</span> &gt;</span><br><span class="line">    select id, name,age from student where id=#&#123;id&#125;</span><br><span class="line">&lt;select&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//mybatis执行：</span></span><br><span class="line">  String sql=<span class="string">"select id, name,age from student where id=?"</span>;</span><br><span class="line">  PreParedStatement ps=conn.prepareStatement(sql);</span><br><span class="line">  ps.setInt(<span class="number">1</span>,<span class="number">101</span>)</span><br></pre></td></tr></table></figure>

<h3 id="-1"><a href="#-1" class="headerlink" title="$"></a>$</h3><ul>
<li>字符串替换，告诉mybatis 使用$包含的字符串采用<strong>替换</strong>和<strong>字符串连接</strong>方式</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--#号 ，通过?占位符，然后利用PreParedStatement去执行--&gt;</span> </span><br><span class="line">select id,name, email,age from student where id=? </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--$号 ，不适用占位符，使用字符串连接方式，利用Statement对象执行--&gt;</span></span><br><span class="line"> String sql="select id,name, email,age from student where id=" + "1001";</span><br></pre></td></tr></table></figure>

<h4 id="替换列名"><a href="#替换列名" class="headerlink" title="替换列名"></a>替换列名</h4><ul>
<li>因为$符号具有替换和连接的作用，所以可以使用器替换列名</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mapper--&gt;</span></span><br><span class="line">select * from student order by $&#123;parameName&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--mybatis执行过程--&gt;</span></span><br><span class="line">"select *  from student order by " + "列名";</span><br></pre></td></tr></table></figure>



<h2 id="单个简单数据类型【常用】"><a href="#单个简单数据类型【常用】" class="headerlink" title="单个简单数据类型【常用】"></a>单个简单数据类型【常用】</h2><ul>
<li>简单类型：mybatis 把java的基本数据类型与String类型</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java:</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Student  <span class="title">selectStudentById</span><span class="params">(Integer id)</span> </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"><span class="comment">//mapper文件获取简单类型的一个参数的值，使用 #&#123;任意字符&#125;</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">//mapper:   </span></span></span><br><span class="line">select id,name, email,age from student where id=#&#123;test&#125;</span><br></pre></td></tr></table></figure>

<h2 id="多个参数"><a href="#多个参数" class="headerlink" title="多个参数"></a>多个参数</h2><h3 id="使用-Param命名参数【常用】"><a href="#使用-Param命名参数【常用】" class="headerlink" title="使用@Param命名参数【常用】"></a>使用@Param命名参数【常用】</h3><ul>
<li>@Param(“参数名”)</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java:</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">selectMulitParam</span><span class="params">(@Param(<span class="string">"myname"</span>)</span> String name, @<span class="title">Param</span><span class="params">(<span class="string">"myage"</span>)</span> Integer age)</span></span><br><span class="line"><span class="function">	</span></span><br><span class="line"><span class="function"><span class="comment">//使用  @Param("参数名")  String name  将参数name 命名为@Param("参数名")</span></span></span><br><span class="line"><span class="function"><span class="comment">//mapper通过新命名的参数名去#&#123;xxx&#125;中字符来匹配</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">//mapper:</span></span></span><br><span class="line">select * from student where name=#&#123;myname&#125; or age=#&#123;myage&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用Java对象【常用】"><a href="#使用Java对象【常用】" class="headerlink" title="使用Java对象【常用】"></a>使用Java对象【常用】</h3><ul>
<li><p>使用java对象的属性值，作为参数实际值；</p>
</li>
<li><p>常用#{属性名}语法，完整语法#{属性名，javaType=类型名称，jdbcType=数据类型} –很少用；</p>
<ul>
<li>javaType：java中的数据类型；</li>
<li>jdbcType：数据库中的数据类型（数据库文档中有说明）。</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java:</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">selectMulitParam</span><span class="params">(Student student)</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">//java.pojo:</span></span></span><br><span class="line"><span class="function">class Student</span>&#123;</span><br><span class="line">    String stuname;</span><br><span class="line">    Integer stuage;</span><br><span class="line">&#125;	</span><br><span class="line"><span class="comment">//#&#123;属性名&#125;，这里的属性名==java对象中的属性名（它先 new 对象，再通过setter将属性注入的）</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//mapper:</span></span><br><span class="line"> select * from student where name=#&#123;stuname&#125; or age=#&#123;stuage&#125;</span><br></pre></td></tr></table></figure>

<h3 id="按参数位置"><a href="#按参数位置" class="headerlink" title="按参数位置"></a>按参数位置</h3><ul>
<li>参数位置从0开始，语法#{arg位置}<ul>
<li>例：第一个参数#{arg0}，第二个参数#{arg1}</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java:</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">selectMulitParam</span><span class="params">(String name,Integer age,String sex)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//mapper:</span></span><br><span class="line">select * from student where name=#&#123;arg0&#125; or sex=#&#123;arg2&#125; or age=#&#123;arg1&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用Map"><a href="#使用Map" class="headerlink" title="使用Map"></a>使用Map</h3><ul>
<li>#{key}，通过key 获取Map中对应的value值</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java:</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">selectMulitParam</span><span class="params">(String name,Integer age,String sex)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//java.Map</span></span><br><span class="line">Map&lt;String,Object&gt; map= <span class="keyword">new</span> HashMap&lt;String ,Object&gt;;</span><br><span class="line">map.put(<span class="string">"myname"</span>,<span class="string">"小明"</span>)</span><br><span class="line">map.put(<span class="string">"myage"</span>,<span class="number">20</span>)</span><br><span class="line">map.put(<span class="string">"mysex"</span>,<span class="string">"男"</span>)</span><br><span class="line"><span class="comment">//mapper:</span></span><br><span class="line">select * from student where name=#&#123;myname&#125; or sex=#&#123;mysex&#125; or age=#&#123;myage&#125;</span><br></pre></td></tr></table></figure>



<h1 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h1><ul>
<li><p>mybatis 执行完sql语句，得到的是java对象</p>
</li>
<li><p>resultType结果类型， 指sql语句执行完毕后， 数据转为的java对象， java类型是任意的。  resultType结果类型的它值 1. 类型的全限定名称   2. 类型的别名， 例如 java.lang.Integer别名是int（mybatis官方文档可查，一般都是改为全小写）。</p>
</li>
</ul>
<h2 id="处理过程"><a href="#处理过程" class="headerlink" title="处理过程"></a>处理过程</h2><ol>
<li>mybatis执行sql语句， 然后mybatis调用类的无参数构造方法，创建对象。</li>
<li>mybatis把ResultSet指定<strong>列值</strong>赋给<strong>同名的属性</strong>。<ul>
<li>如果无同名属性则不赋值</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//org.didiqi.domain.Student</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">Student</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String  name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//stter &amp; getter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="mybatis"><a href="#mybatis" class="headerlink" title="mybatis"></a>mybatis</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!----&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectMultiPosition"</span> <span class="attr">resultType</span>=<span class="string">"org.didiqi.domain.Student"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--根据列名==Student属性名 赋值---&gt;</span></span><br><span class="line">    select id,name, email,age from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mybatis 处理方式和JDBC相似，只是mybatis将复制过程封装隐藏了。</span><br></pre></td></tr></table></figure>

<h3 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ResultSet rs = executeQuery(<span class="string">" select id,name, email,age from student"</span> )</span><br><span class="line"><span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">    </span><br><span class="line">        Student  student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setId(rs.getInt(<span class="string">"id"</span>));</span><br><span class="line">        student.setName(rs.getString(<span class="string">"name"</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="返回值列名≠对象属性名"><a href="#返回值列名≠对象属性名" class="headerlink" title="返回值列名≠对象属性名"></a>返回值列名≠对象属性名</h2><h3 id="resultMap"><a href="#resultMap" class="headerlink" title="resultMap"></a>resultMap</h3><ul>
<li>类名与java 属性的关系</li>
<li>当你的列名和属性名不一样时，一定使用resultMap</li>
<li>注意：resultType 与resultMap不要一起用，二选一</li>
</ul>
<p>实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//org.didiqi.domain.Student</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">Student</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String  myname;</span><br><span class="line">    <span class="keyword">private</span> String myemail;</span><br><span class="line">    <span class="keyword">private</span> Integer myage;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//stter &amp; getter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>mapper</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectMultiPosition"</span> <span class="attr">resultMap</span>=<span class="string">"studentMap"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--此时列名与返回对象的属性值名称不同--&gt;</span></span><br><span class="line">    select id,name, email,age from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>resultMap</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMapid="studentMap"</span> <span class="attr">type</span>=<span class="string">"要指定的对象的全限定名，org.didiqi.domain.Student"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--主键列，用id标签--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"列名"</span>  <span class="attr">property</span>=<span class="string">"属性名"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span>  <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--非主键列，用result标签--&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"列名"</span>  <span class="attr">property</span>=<span class="string">"属性名"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span>  <span class="attr">property</span>=<span class="string">"myname"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="起别名"><a href="#起别名" class="headerlink" title="起别名"></a>起别名</h3><p>实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//org.didiqi.domain.Student</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">Student</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer myid;</span><br><span class="line">    <span class="keyword">private</span> String  myname;</span><br><span class="line">    <span class="keyword">private</span> String myemail;</span><br><span class="line">    <span class="keyword">private</span> Integer myage;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//stter &amp; getter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>mapper</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectMultiPosition"</span> <span class="attr">resultType</span>=<span class="string">"org.didiqi.domain.Student"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--此时列名与返回对象的属性值名称不同--&gt;</span></span><br><span class="line">    select id as myid ,name as myname, email as myemail,age as myage from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="模糊查询like"><a href="#模糊查询like" class="headerlink" title="模糊查询like"></a>模糊查询like</h1><h2 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h2><table>
<thead>
<tr>
<th>通配符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>%</td>
<td>替代一个或多个字符</td>
</tr>
<tr>
<td>_</td>
<td>仅替代一个字符</td>
</tr>
<tr>
<td>[charlist]</td>
<td>字符列中的任何单一字符</td>
</tr>
<tr>
<td>[^charlist] or [!charlist]</td>
<td>不在字符列中的任何单一字符</td>
</tr>
</tbody></table>
<h2 id="java代码中指定like内容"><a href="#java代码中指定like内容" class="headerlink" title="java代码中指定like内容"></a>java代码中指定like内容</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java代码准备好内容</span></span><br><span class="line">String name=<span class="string">"%李%"</span>；</span><br><span class="line">    </span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">selectLikeOne</span><span class="params">(String name)</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"> <span class="comment">//mapper:   </span></span></span><br><span class="line"><span class="function">select * from student where  name like #</span>&#123;name&#125;</span><br></pre></td></tr></table></figure>



<h2 id="mapper文件中拼接"><a href="#mapper文件中拼接" class="headerlink" title="mapper文件中拼接"></a>mapper文件中拼接</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">selectLikeOne</span><span class="params">(String name)</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"> <span class="comment">//mapper中拼接:   </span></span></span><br><span class="line"><span class="function">select * from student where  name like "%" #</span>&#123;name&#125; <span class="string">"%"</span></span><br></pre></td></tr></table></figure>



<h1 id="动态sql"><a href="#动态sql" class="headerlink" title="动态sql"></a>动态sql</h1><ul>
<li>sql的内容是变化的，可以根据条件获取到不同的sql语句。主要是where部分发生变化。</li>
</ul>
<h2 id="if标签"><a href="#if标签" class="headerlink" title="if标签"></a>if标签</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;if test&#x3D;&quot;判断java对象的属性值,属性&#x3D;&#x3D;xxx值&quot;&gt;</span><br><span class="line">    部分sql语句</span><br><span class="line">&lt;&#x2F;if&gt;</span><br></pre></td></tr></table></figure>

<h3 id="例"><a href="#例" class="headerlink" title="例"></a>例</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">	select * from student </span><br><span class="line">    where</span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"name !=null and name != ''"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--如果上面的条件成立，则将该语句添加到 where 后---&gt;</span></span><br><span class="line">        name= #&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    &lt;if test age&lt;10&gt;</span><br><span class="line">    <span class="comment">&lt;!--如果上面的条件成立，则将该语句添加到 where 后---&gt;</span></span><br><span class="line">    	and age=#&#123;age&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面的例子中有一个问题如果 name==null 则，第一个语句不存在而第二语句成立 则sql语句会变为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where and age&#x3D;?</span><br></pre></td></tr></table></figure>

<p>这显然是错误的语法所以可以在where 后面添加,放能防止出现此类错误</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">where 1&#x3D;1</span><br></pre></td></tr></table></figure>

<p>此外还有where标签来解决此种错误</p>
<h2 id="where标签"><a href="#where标签" class="headerlink" title="where标签"></a>where标签</h2><ul>
<li>用来包含 多个&lt;if&gt;的， 当多个if有一个成立的， &lt;where&gt;会自动增加一个where关键字，并去掉 if中多余的 and ，or等。(不用在添加hwhere 1=1 了)</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">	select * from student </span><br><span class="line">    <span class="comment">&lt;!--使用where标签就不用担心 and 等字符导致的语法错误问题了--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"name !=null and name != ''"</span>&gt;</span></span><br><span class="line">            name= #&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        &lt;if test age&lt;10&gt;</span><br><span class="line">            and age=#&#123;age&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="foreach标签"><a href="#foreach标签" class="headerlink" title="foreach标签"></a>foreach标签</h2><ul>
<li>循环java中的数组，list集合的。 主要用在sql的in语句中。</li>
</ul>
<h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">""</span> <span class="attr">item</span>=<span class="string">""</span> <span class="attr">open</span>=<span class="string">""</span> <span class="attr">close</span>=<span class="string">""</span> <span class="attr">separator</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    #&#123;xxx&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>collection</td>
<td>表示接口中的方法参数的类型， 如果是数组使用array , 如果是list集合使用list</td>
</tr>
<tr>
<td>item</td>
<td>自定义的，表示数组和集合成员的变量</td>
</tr>
<tr>
<td>open</td>
<td>循环开始是的字符</td>
</tr>
<tr>
<td>close</td>
<td>循环结束时的字符</td>
</tr>
<tr>
<td>separator</td>
<td>集合成员之间的分隔符</td>
</tr>
</tbody></table>
<h3 id="例-1"><a href="#例-1" class="headerlink" title="例"></a>例</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--最终的sql语句--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--sql="select * from student where id in(1,2,3,4)"--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--mybatis处理格式--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--这个占位符的个数根据传入参数mybatis自己处理的--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--sql="select * from student where id in(？,？,？,？)"--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--第一种写法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select...</span>&gt;</span></span><br><span class="line">	select * from student</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">ids</span> !=<span class="string">null</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--实际上就是做一个字符串的拼接--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">item</span>=<span class="string">"myid"</span> <span class="attr">open</span>=<span class="string">"id in ("</span> <span class="attr">close</span>=<span class="string">")"</span>  <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">                #&#123;myid&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span>     </span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--第二种写法--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--不同的字符拼接方式，当然理论上，只要利用open与close可以组合成无限多种写法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select...</span>&gt;</span></span><br><span class="line">	select * from student id in</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">ids</span> !=<span class="string">null</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--实际上就是做一个字符串的拼接--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">item</span>=<span class="string">"myid"</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">close</span>=<span class="string">")"</span>  <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">                #&#123;myid&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span>     </span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--如果传入的值是对象--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select...</span>&gt;</span></span><br><span class="line">	select * from student id in</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">ids</span> !=<span class="string">null</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--实际上就是做一个字符串的拼接--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">item</span>=<span class="string">"stu"</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">close</span>=<span class="string">")"</span>  <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--mybatis 会自动调用对象的get方法，获取对相应属性--&gt;</span></span><br><span class="line">                #&#123;stu.myid&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span>     </span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<div class="note danger">
            <p>🚥🍀  ~ · · · <strong>未完，更新ING</strong> · · · ~</p>
          </div>

<div class="note info">
            <p>🎯 本文为个人学习笔记，若有错误之处，请在下方留言。将会及时修正。</p>
          </div>



</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Blue Dam</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://wwww.cyberboy.online/2020/09/03/mybatisNote/">https://wwww.cyberboy.online/2020/09/03/mybatisNote/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://wwww.cyberboy.online" target="_blank">DIDIQi</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a><a class="post-meta__tags" href="/tags/Spring/">Spring</a></div><div class="post_share"><div class="social-share" data-image="https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/Mybatis/mybatis.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><button class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.png" alt="wechat" onclick="window.open('/img/wechat.png')"/><div class="post-qr-code__desc">wechat</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="alipay" onclick="window.open('/img/alipay.jpg')"/><div class="post-qr-code__desc">alipay</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/09/04/reSend/"><img class="prev-cover" data-src="https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/reSend/cover.png" onerror="onerror=null;src='https://wx1.sbimg.cn/2020/07/02/2YI2T.png'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">转发与重定向</div></div></a></div><div class="next-post pull-right"><a href="/2020/08/17/SpringOfAOP/"><img class="next-cover" data-src="https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/Spring/IOC%26DI/cover.jpg" onerror="onerror=null;src='https://wx1.sbimg.cn/2020/07/02/2YI2T.png'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Spring框架之动态代理&amp;AOP</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/08/17/SpringOfAOP/" title="Spring框架之动态代理&AOP"><img class="relatedPosts_cover" data-src="https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/Spring/IOC%26DI/cover.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-17</div><div class="relatedPosts_title">Spring框架之动态代理&AOP</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/14/springOfIoC/" title="Spring框架之IoC&DI"><img class="relatedPosts_cover" data-src="https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/Spring/IOC%26DI/cover.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-14</div><div class="relatedPosts_title">Spring框架之IoC&DI</div></div></a></div><div class="relatedPosts_item"><a href="/2020/07/29/pythonNote/" title="Python 笔记"><img class="relatedPosts_cover" data-src="https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/42e9m9.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-29</div><div class="relatedPosts_title">Python 笔记</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/03/gitNote/" title="Git使用手册"><img class="relatedPosts_cover" data-src="https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/git/gittop.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-03</div><div class="relatedPosts_title">Git使用手册</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/07/tomcatNote/" title="Tomcat 简介"><img class="relatedPosts_cover" data-src="https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/tomcatNote/timg-tomcat.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-07</div><div class="relatedPosts_title">Tomcat 简介</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/08/markDownNote/" title="MarkDown 基本语法"><img class="relatedPosts_cover" data-src="https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/markdown/markdown.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-08</div><div class="relatedPosts_title">MarkDown 基本语法</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick')
var requiredFields = requestSetting(['nick','mail'],'nick')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'xIzFSopAwf4gfgISvtmq6m0D-gzGzoHsz',
  appKey: 'wAGhojVsihRfO5VRtXBEbKSx',
  placeholder: '留下你来过的痕迹~',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(https://picbed-1258993773.cos.ap-nanjing.myqcloud.com/gallery/waller/yjmvwx.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By Blue Dam</div><div class="footer_custom_text">📌一直在路上</div><div class="icp"><a href="http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>苏ICP备0001</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><script>if (document.getElementsByClassName('mermaid').length) {
  loadScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js',function () {
    mermaid.initialize({
      theme: 'neutral',
  })
})
}</script><script src="https://cdn.jsdelivr.net/gh/DIDIQi/cdn/js/fishes.js"></script><script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/081f0fb8.js","daovoice")
</script><script>var isChatBtn = false
daovoice('init', {
  app_id: '081f0fb8',},{
  launcher: { 
     disableLauncherIcon: isChatBtn // 悬浮 ICON 是否显示
  },
});
daovoice('update');

if (isChatBtn) {
  var chatBtn = document.getElementById("chat_btn")
  chatBtn.addEventListener("click", function(){
    daovoice('show')
  });
} else {
  if (false) {
    function chatBtnHide () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: true // 悬浮 ICON 是否显示
        },
      });
    }
    function chatBtnShow () {
      daovoice('update', {},{
        launcher: { 
        disableLauncherIcon: false // 悬浮 ICON 是否显示
        },
      });
    }
  }
}</script></body></html>